<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="style.css" />
    <title>Stopwatch - VanillaJS</title>
</head>

<body>
    <h1>VanillaJS Stopwatch</h1>
    <hr>
    <!-- Stopwatch -->
    <div id="stopwatch">
        <div id="readout">
            00:00:00
        </div>
        <!-- Stopwatch Controls -->
        <ul id="buttons">
            <li id="start"><button onclick="startStopwatch()">Start</button></li>
            <li id="stop"><button onclick="stopStopwatch()">Stop</button></li>
            <li id="reset"><button onclick="resetStopwatch()">Reset</button></li>
        </ul>
    </div>
    <!-- <script src="/vanillaStopWatch.js"> -->

    <script>
        const stopwatch_readout = document.getElementById("readout");
        const haltStopwatchTick = () => clearTimeout(startTimeout);

        let [hr, min, sec] = [0, 0, 0];
        let startTimeout;
        let stopwatch_halted = true;


        function startStopwatch() {

            if (stopwatch_halted) {
                runStopwatchTick();
                stopwatch_halted = false;
            }

        }


        function stopStopwatch() {
            if (!stopwatch_halted) {
                stopwatch_halted = true;
            }
            haltStopwatchTick();
        }

        function resetStopwatch() {
            stopwatch_readout.innerHTML = "00:00:00";
            hr = 00, min = 00, sec = 00;
            stopwatch_halted = true;
            haltStopwatchTick();

        }

        function runStopwatchTick() {
            startTimeout = setTimeout("runStopwatchTick()", 1000);
            sec = parseInt(sec), min = parseInt(min), hr = parseInt(hr);
            sec = sec + 1;

            if (sec === 60) {
                min = min + 1, sec = 0;
            }
            if (min === 60) {
                hr = hr + 1, min = 0; sec = 0;
            }

            if (sec < 10 || sec === 0) {
                sec = "0" + sec;
            }
            if (min < 10 || min === 0) {
                min = "0" + min;
            }
            if (hr < 10 || hr === 0) {
                hr = "0" + hr;
            }

            stopwatch_readout.innerHTML = hr + ":" + min + ":" + sec;
            console.log(sec);
        }


    </script>

</body>

</html>